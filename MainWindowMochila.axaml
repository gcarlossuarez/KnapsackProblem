<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="KnapsackProblem.MainWindowMochila"
        Title="Problema de la Mochila"
        Width="800" Height="600">

  <StackPanel Margin="10">
    <TextBlock Text="Problema de la Mochila 0/1" FontSize="20" Margin="0,0,0,10"/>
    
    <WrapPanel Margin="0,0,0,10">
      <Button x:Name="PasoBtn" Content="Paso" Margin="5"/>
      <Button x:Name="ResolverBtn" Content="Resolver Todo" Margin="5"/>
      <Button x:Name="ReiniciarBtn" Content="Reiniciar" Margin="5"/>
	  <Button x:Name="RandomBtn" Content="Generar Aleatorio" Margin="5"/>
      <Button x:Name="ModoBtn" Content="Modo Estudio" Margin="5"/>
    </WrapPanel>


    <Border BorderBrush="Gray" BorderThickness="1" Margin="0,10,0,10" Padding="5">
        <StackPanel>
            <TextBlock Text="Algoritmo 0/1 Knapsack" FontWeight="Bold" Margin="0,0,0,5"/>
            <TextBlock x:Name="LineInicio" FontFamily="Consolas" FontSize="14">
            1. Crear tabla dp[0..n,0..W] = 0
            </TextBlock>
            <TextBlock x:Name="LineLoopExterno" FontFamily="Consolas" FontSize="14">
            2. Para i = 1 hasta n:
            </TextBlock>
            <TextBlock x:Name="LineLoopInterno" FontFamily="Consolas" FontSize="14">
            3.   Para w = 0 hasta W:
            </TextBlock>
            <TextBlock x:Name="LineCondicion" FontFamily="Consolas" FontSize="14">
            4.     Si peso[i] &lt;= w:
            </TextBlock>
            <TextBlock x:Name="LineIncluirExcluir" FontFamily="Consolas" FontSize="14">
            5.        dp[i,w] = max(dp[i-1,w], valor[i] + dp[i-1,w-peso[i]])
            </TextBlock>
            <TextBlock x:Name="LineElse" FontFamily="Consolas" FontSize="14">
            6.     En otro caso: dp[i,w] = dp[i-1,w]
            </TextBlock>
            <TextBlock x:Name="LineFin" FontFamily="Consolas" FontSize="14">
            7. Resultado = dp[n,W]
            </TextBlock>
        </StackPanel>
    </Border>

    <TextBlock x:Name="InfoLabel" Text="Info:" FontSize="16" Margin="0,0,0,10"/>

    <StackPanel Margin="0,10,0,10">
        <TextBlock Text="Ítems disponibles:" FontWeight="Bold"/>
        <ItemsControl x:Name="ItemsView">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding}" />
                </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
    </StackPanel>

    <TextBlock x:Name="ResultadoLabel" FontSize="16" 
           Margin="0,10,0,10" Text="Resultado: -" />

    <DataGrid x:Name="TablaDP" AutoGenerateColumns="False" 
              HeadersVisibility="All" GridLinesVisibility="All"
              IsReadOnly="True" CanUserResizeColumns="False">
      <DataGrid.Columns>
        <DataGridTextColumn Header="Fila" Binding="{Binding Fila}"/>
        <DataGridTextColumn Header="Columna" Binding="{Binding Columna}"/>
        <DataGridTextColumn Header="Valor" Binding="{Binding Valor}"/>
      </DataGrid.Columns>
    </DataGrid>

    <StackPanel Orientation="Vertical" Margin="0,20,0,0">
        <TextBlock Text="Progreso del Juego:" FontWeight="Bold" />
        <ProgressBar x:Name="ScoreProgress" Minimum="0" Maximum="100" Height="20" Width="200"/>
        <TextBlock x:Name="ScoreLabel" Text="Puntaje: 0" FontSize="14" Margin="10,0"/>
        <TextBlock x:Name="MedalLabel" Text="-" FontSize="16" FontWeight="Bold" Margin="0,5,0,0"/>
    </StackPanel>

    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
        <ItemsControl x:Name="TablaView">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid Rows="{Binding NumFilas}" Columns="{Binding NumColumnas}"/>
             </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <Border BorderBrush="Black" BorderThickness="1" Background="{Binding ColorFondo}">
                    <TextBlock Text="{Binding Valor}" 
                             HorizontalAlignment="Center" VerticalAlignment="Center"/>
                 </Border>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </ScrollViewer>

  </StackPanel>
</Window>

